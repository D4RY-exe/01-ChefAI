{% extends 'base.html' %}
{% load static %}

{% block background_Style %}
    <style>
        body{
            background-image: url('{% static 'chef_ai/images/Countertop.png' %}');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            height: 100vh;
        }
    </style>
{% endblock %}

{% block content %}
<div class="recipe-container">
    <div class="recipe-content">
        {% if ai_response.title == "Cannot make recipe with ingredients provided" %}
        <div class="no-recipe">
            <h1>{{ ai_response.title }}</h1>
            <h2>You need more ingredients!</h2>
            <h3>Additional:</h3>
            <p class="suggestion">
                {% for item in ai_response.ingredients %}
                {{ item }} {% if not forloop.last %} | {% endif %}
                {% endfor %}
            </p>
        </div>
        {% else %}
        <div class="selected-ingredients">
            <h2>Your selected ingredients:</h2>
            <p>
                {% for item in selected_options %}
                {{ item }} {% if not forloop.last %} | {% endif %}
                {% endfor %}
            </p>
        </div>

        <div class="res">
            <h2>{{ ai_response.title }}</h2>
            <p><strong>Cuisine:</strong> {{ ai_response.cuisine }}</p>
            <p><strong>Time Required:</strong> {{ ai_response.time }}</p>

            <h2>Ingredients Used</h2>
            <ul>
                {% for item in ai_response.ingredients %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>

            <h2>Utensils</h2>
            <ul>
                {% for item in ai_response.utensils %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>

            <h2>Steps</h2>
            <ol>
                {% for step in ai_response.steps %}
                <li>{{ step }}</li>
                {% endfor %}
            </ol>
        </div>
        {% endif %}
    </div>
    <div class="download-recipe">
        <p class="download-text">Download recipe: </p>
        <button class="jpg" onclick="downloadFile('jpg')"><strong>JPG</strong></button>
        <button class="pdf" onclick="downloadFile('pdf')"><strong>PDF</strong></button>
    </div>
</div>

<script>
    function downloadFile(type){
        let url = type === 'pdf' ? '/download-pdf/' : '/download-jpg/';
        window.location.href = url;
    }
</script>

</body>

</html>
{% endblock %}